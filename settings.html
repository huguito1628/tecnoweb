<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuraciones - Abba Jhire Corporation</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="dashboard.css" />

  <style>
    body { display: none; }

    .setting-card {
      background-color: #2b2d30;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 20px;
      height: 100%;
      transition: all 0.3s ease;
    }

    .setting-card:hover {
      transform: translateY(-4px);
      border-color: #fff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }

    .form-control, .form-select {
      background-color: #1e1e1e;
      color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .form-switch .form-check-input {
      background-color: #444;
      border-color: rgba(255,255,255,0.3);
    }

    .form-switch .form-check-input:checked {
      background-color: #0d6efd;
    }

    @media (max-width: 768px) {
      .sidebar { transform: translateX(-100%); transition: transform 0.3s ease-in-out; z-index: 1050; }
      .sidebar.show-sidebar { transform: translateX(0); }
      .main-content { margin-left: 0; }
      #closeSidebar { position: absolute; top: 10px; right: 10px; z-index: 1100; }
    }
    @media (min-width: 769px) {
      .main-content { margin-left: 250px; }
      .sidebar { width: 250px; }
    }
  </style>

  <script>
    const sessionActive = localStorage.getItem('sessionActive');
    const sessionUser = localStorage.getItem('sessionUser');
    if (sessionActive !== 'true' || !sessionUser) {
      window.location.href = 'auth.html';
    } else {
      document.addEventListener('DOMContentLoaded', () => {
        document.body.style.display = 'block';
      });
    }
  </script>
</head>

<body class="bg-dark text-light">
  <div class="dashboard-wrapper">
    <!-- Sidebar -->
    <aside class="sidebar bg-dark position-fixed h-100" id="sidebar">
      <button class="btn btn-light d-md-none m-2" id="closeSidebar">
        <i class="bi bi-x-lg fs-4"></i>
      </button>

      <div class="brand mt-4 text-center">
        <h2>ABBA<br><span>JHIRE</span></h2>
      </div>

      <ul class="menu">
        <li><a href="index.html" class="menu-link"><i class="bi bi-speedometer2"></i> <span>Inicio</span></a></li>
        <li><a href="users.html" class="menu-link"><i class="bi bi-people"></i> <span>Usuarios</span></a></li>
        <li><a href="inventory.html" class="menu-link"><i class="bi bi-box-seam"></i> <span>Inventario</span></a></li>
        <li><a href="reports.html" class="menu-link"><i class="bi bi-bar-chart"></i> <span>Reportes</span></a></li>
        <li class="active"><a href="settings.html" class="menu-link"><i class="bi bi-gear"></i> <span>Configuración</span></a></li>
      </ul>

      <button id="logoutBtn" class="logout-btn"><i class="bi bi-box-arrow-right"></i> Cerrar sesión</button>
    </aside>

    <!-- Contenido principal -->
    <main class="main-content">
      <header class="topbar d-flex justify-content-between align-items-center">
        <button class="btn btn-outline-light d-md-none" id="menuToggle"><i class="bi bi-list fs-2"></i></button>
        <h3 class="mb-0"><i class="bi bi-gear"></i> Configuración del Usuario</h3>
      </header>

      <section class="content-section mt-4">
        <div class="container-fluid">
          <div class="row g-4">

            <!-- Perfil -->
            <div class="col-12 col-lg-6">
              <div class="setting-card">
                <h5><i class="bi bi-person-circle"></i> Preferencias de Usuario</h5>
                <p class="text-secondary">Administra tu información personal y cómo apareces en el sistema.</p>

                <div class="text-center mb-3">
                  <img src="images/default-user.jpg" alt="Foto de perfil" class="rounded-circle" width="90" height="90" id="profilePreview">
                </div>

                <div class="mb-3">
                  <label class="form-label">Cambiar foto de perfil</label>
                  <input type="file" class="form-control" id="profileImage" accept="image/*">
                </div>

                <div class="mb-3">
                  <label class="form-label">Nombre visible</label>
                  <input type="text" class="form-control" id="displayName" placeholder="Tu nombre visible">
                </div>

                <div class="mb-3">
                  <label class="form-label">Cargo preferido</label>
                  <select class="form-select" id="preferredRole">
                    <option>Administrador</option>
                    <option>Supervisor</option>
                    <option>Vendedor</option>
                    <option>Soporte Técnico</option>
                  </select>
                </div>

                <button class="btn btn-light w-100" id="saveProfileBtn">Guardar Cambios</button>
              </div>
            </div>

            <!-- Seguridad -->
            <div class="col-12 col-lg-6">
              <div class="setting-card">
                <h5><i class="bi bi-shield-lock"></i> Seguridad y Acceso</h5>
                <p class="text-secondary">Configura la seguridad de tu cuenta.</p>

                <div class="form-check form-switch mb-2">
                  <input class="form-check-input" type="checkbox" id="twoFactor" checked>
                  <label class="form-check-label" for="twoFactor">Activar verificación en dos pasos</label>
                </div>

                <div class="form-check form-switch mb-4">
                  <input class="form-check-input" type="checkbox" id="autoLock">
                  <label class="form-check-label" for="autoLock">Bloqueo automático tras inactividad</label>
                </div>

                <form id="passwordForm">
                  <label class="form-label">Actualizar contraseña</label>
                  <input type="password" id="newPass" class="form-control mb-2" placeholder="Nueva contraseña" required>
                  <input type="password" id="confirmPass" class="form-control mb-3" placeholder="Confirmar contraseña" required>
                  <button type="submit" class="btn btn-outline-light w-100">Actualizar Contraseña</button>
                </form>
              </div>
            </div>

            <!-- Notificaciones -->
            <div class="col-12 col-lg-6">
              <div class="setting-card">
                <h5><i class="bi bi-bell"></i> Notificaciones</h5>
                <p class="text-secondary">Personaliza las alertas que recibirás.</p>

                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="notifUsers" checked>
                  <label class="form-check-label" for="notifUsers">Nuevos usuarios agregados</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="notifStock" checked>
                  <label class="form-check-label" for="notifStock">Avisos de stock bajo</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="notifReports">
                  <label class="form-check-label" for="notifReports">Resumen semanal de reportes</label>
                </div>
              </div>
            </div>

            <!-- Privacidad -->
            <div class="col-12 col-lg-6">
              <div class="setting-card">
                <h5><i class="bi bi-eye-slash"></i> Privacidad</h5>
                <p class="text-secondary">Controla tu visibilidad dentro del sistema.</p>

                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="showOnlineStatus" checked>
                  <label class="form-check-label" for="showOnlineStatus">Mostrar mi estado “En línea”</label>
                </div>

                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="showActivity">
                  <label class="form-check-label" for="showActivity">Mostrar mi actividad reciente</label>
                </div>

                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="hideSensitive">
                  <label class="form-check-label" for="hideSensitive">Ocultar datos sensibles por defecto</label>
                </div>
              </div>
            </div>

            <!-- Sesión -->
            <div class="col-12">
              <div class="setting-card">
                <h5><i class="bi bi-clock-history"></i> Sesión e Inactividad</h5>
                <p class="text-secondary">Configura cuánto tiempo puede estar abierta la sesión sin actividad.</p>

                <div class="row g-3 align-items-center">
                  <div class="col-md-4">
                    <select id="sessionTimeout" class="form-select">
                      <option value="5">5 minutos</option>
                      <option value="10" selected>10 minutos</option>
                      <option value="20">20 minutos</option>
                      <option value="30">30 minutos</option>
                    </select>
                  </div>
                  <div class="col-md-8">
                    <button class="btn btn-light w-100" id="saveSessionSettings">Guardar Configuración</button>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const sidebar = document.getElementById("sidebar");
    document.getElementById("menuToggle").addEventListener("click", () => sidebar.classList.add("show-sidebar"));
    document.getElementById("closeSidebar").addEventListener("click", () => sidebar.classList.remove("show-sidebar"));

    // Previsualización de imagen
    document.getElementById("profileImage").addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (ev) => document.getElementById("profilePreview").src = ev.target.result;
        reader.readAsDataURL(file);
      }
    });

    // Guardar perfil
    document.getElementById("saveProfileBtn").addEventListener("click", () => {
      const name = document.getElementById("displayName").value;
      alert(`✅ Perfil actualizado. Bien hecho, ${name || "usuario"}!`);
    });

    // Cambio de contraseña
    document.getElementById("passwordForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const pass = document.getElementById("newPass").value;
      const confirm = document.getElementById("confirmPass").value;
      if (pass !== confirm) return alert("❌ Las contraseñas no coinciden.");
      alert("🔐 Contraseña actualizada correctamente.");
      e.target.reset();
    });

    // Guardar tiempo de sesión
    document.getElementById("saveSessionSettings").addEventListener("click", () => {
      const timeout = document.getElementById("sessionTimeout").value;
      localStorage.setItem("sessionTimeout", timeout);
      alert(`✅ Tiempo de sesión configurado en ${timeout} minutos.`);
    });
  </script>
</body>
</html>
